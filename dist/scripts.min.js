let pokemonRepository=function(){let t=[];function e(e){"object"==typeof e&&"name"in e&&"detailsUrl"in e?t.push(e):console.log("Error!")}function n(){return t}function o(t){let e=document.querySelector(".row"),n=document.createElement("div");e.appendChild(n),n.classList.add("list-group-item","col-sm-6","col-md-4","col-lg-3"),n.id=t.name;let o=document.createElement("button");o.innerText=t.name+"\n",o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#exampleModal"),n.appendChild(o),o.classList.add("btn","btn-info","btn-lg","btn-block","list-btn");let i=document.createElement("img");i.classList.add("button-img"),i.alt="pokemon name",i.src=t.imageUrlFront,i.style="width:70px",o.appendChild(i),o.addEventListener("click",function(){l(t)}),a(t).then(function(){i.src=t.imageUrlFront})}async function i(){try{let t=await fetch("https://pokeapi.co/api/v2/pokemon/?limit=150"),n=await t.json();n.results.forEach(function(t){let n={name:t.name,detailsUrl:t.url};e(n),console.log(n)})}catch(o){console.error(o)}}async function a(t){let e=t.detailsUrl;try{let n=await fetch(e),o=await n.json();t.imageUrlFront=o.sprites.other.dream_world.front_default,t.height=o.height,t.types=o.types.map(function(t){return t.type.name}),t.abilities=o.abilities.map(function(t){return t.ability.name})}catch(i){console.error(i)}}function l(t){pokemonRepository.loadDetails(t).then(function(){console.log(t),r(t)})}function r(t){let e=$(".modal-body"),n=$(".modal-title");n.empty(),e.empty();let o=$("<h1>"+t.name+"</h1>"),i=$('<img class="modal-img" style="width:50%">');i.attr("src",t.imageUrlFront);let a=$("<p>Height : "+t.height+"'</p>"),l=$("<p>Types : "+t.types.join(", ")+"</p>"),r=$("<p>Abilities : "+t.abilities.join(", ")+"</p>");n.append(o),e.append(i),e.append(a),e.append(l),e.append(r)}return{getAll:n,add:e,addListItem:o,loadList:i,loadDetails:a,showDetails:l,showModal:r,filterPokemons:function e(n){let i=t.filter(t=>t.name.toLowerCase().includes(n.toLowerCase()));document.querySelector(".row").innerHTML="",i.forEach(t=>o(t))}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)}),document.querySelector("#search-form").addEventListener("submit",function(t){t.preventDefault();let e=document.querySelector("#search-input").value;pokemonRepository.filterPokemons(e)})});
